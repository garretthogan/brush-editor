<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="./favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GBrush Editor</title>
  </head>
  <body>
    <div id="app">
      <div id="header">
        <div id="mode-tabs">
          <button id="tab-brush" class="tab active">Object Editor</button>
          <button id="tab-maze" class="tab">Maze Generator</button>
          <button id="tab-arena" class="tab">Arena Generator</button>
          <button id="tab-skybox" class="tab">Skybox Editor</button>
        </div>
        <div id="file-buttons">
          <button id="btn-save" title="Save Level">Save</button>
          <button id="btn-load" title="Load Level / Import GLB">Load</button>
        </div>
      </div>
      <div id="viewport">
        <div id="pick-debug" class="debug-overlay hidden"></div>
      </div>
      <div id="controls-area">
        <div id="brush-controls" class="mode-panel">
          <div class="panel collapsible">
            <button class="panel-header" data-panel="brush-tools">
              <span class="panel-chevron">▼</span>
              Brush Tools
            </button>
            <div class="panel-content" id="panel-brush-tools">
              <div class="control-row">
                <label for="texture-select">Texture</label>
                <select id="texture-select"></select>
              </div>
              <div class="add-brushes">
                <button id="btn-add-box" title="Add Box Brush">Add Box</button>
                <button id="btn-add-cylinder" title="Add Cylinder Brush">Add Cylinder</button>
              </div>
              <div class="tool-divider" role="separator"></div>
              <div class="brush-actions">
                <button id="btn-move" title="Move Brush">Move</button>
                <button id="btn-rotate" title="Rotate Brush">Rotate</button>
                <button id="btn-scale" title="Scale Brush">Scale</button>
                <button id="btn-delete" title="Delete Selected">Delete</button>
              </div>
            </div>
          </div>
          <div class="panel collapsible">
            <button class="panel-header" data-panel="light-tools">
              <span class="panel-chevron">▼</span>
              Lights
            </button>
            <div class="panel-content" id="panel-light-tools">
              <div class="add-lights">
                <button id="btn-add-point-light" title="Add Point Light">Point Light</button>
                <button id="btn-add-spot-light" title="Add Spot Light">Spot Light</button>
                <button id="btn-add-directional-light" title="Add Directional Light">Directional</button>
                <button id="btn-add-ambient-light" title="Add Ambient Light">Ambient</button>
              </div>
              <div class="tool-divider" role="separator"></div>
              <div id="light-controls" class="light-controls">
                <div id="light-controls-empty" class="light-controls-empty">Select a light to edit</div>
                <div id="light-controls-point" class="light-controls-group hidden">
                  <div class="light-controls-title">Point Light</div>
                  <div class="control-row">
                    <label for="point-light-color">Color</label>
                    <input type="color" id="point-light-color" value="#ffffff" />
                  </div>
                  <div class="control-row">
                    <label for="point-light-intensity">Intensity</label>
                    <input type="range" id="point-light-intensity" min="0" max="10" step="0.1" value="1" />
                    <span id="point-light-intensity-value">1</span>
                  </div>
                  <div class="control-row">
                    <label for="point-light-radius">Radius</label>
                    <input type="range" id="point-light-radius" min="0" max="100" step="0.5" value="20" />
                    <span id="point-light-radius-value">20</span>
                  </div>
                </div>
                <div id="light-controls-spot" class="light-controls-group hidden">
                  <div class="light-controls-title">Spot Light</div>
                  <div class="control-row">
                    <label for="spot-light-color">Color</label>
                    <input type="color" id="spot-light-color" value="#ffffff" />
                  </div>
                  <div class="control-row">
                    <label for="spot-light-intensity">Intensity</label>
                    <input type="range" id="spot-light-intensity" min="0" max="10" step="0.1" value="2" />
                    <span id="spot-light-intensity-value">2</span>
                  </div>
                  <div class="control-row">
                    <label for="spot-light-radius">Radius</label>
                    <input type="range" id="spot-light-radius" min="0" max="100" step="0.5" value="25" />
                    <span id="spot-light-radius-value">25</span>
                  </div>
                  <div class="control-row">
                    <label for="spot-light-angle">Cone Angle</label>
                    <input type="range" id="spot-light-angle" min="5" max="90" step="1" value="30" />
                    <span id="spot-light-angle-value">30</span>
                  </div>
                </div>
                <div id="light-controls-ambient" class="light-controls-group hidden">
                  <div class="light-controls-title">Ambient Light</div>
                  <div class="control-row">
                    <label for="ambient-light-color">Color</label>
                    <input type="color" id="ambient-light-color" value="#ffffff" />
                  </div>
                  <div class="control-row">
                    <label for="ambient-light-intensity">Intensity</label>
                    <input type="range" id="ambient-light-intensity" min="0" max="5" step="0.1" value="0.5" />
                    <span id="ambient-light-intensity-value">0.5</span>
                  </div>
                </div>
                <div id="light-controls-directional" class="light-controls-group hidden">
                  <div class="light-controls-title">Directional Light</div>
                  <div class="control-row">
                    <label for="directional-light-color">Color</label>
                    <input type="color" id="directional-light-color" value="#ffffff" />
                  </div>
                  <div class="control-row">
                    <label for="directional-light-intensity">Intensity</label>
                    <input type="range" id="directional-light-intensity" min="0" max="10" step="0.1" value="1" />
                    <span id="directional-light-intensity-value">1</span>
                  </div>
                  <div class="control-row">
                    <label>Direction</label>
                    <div class="direction-inputs">
                      <input type="number" id="directional-light-dir-x" step="0.1" value="0" />
                      <input type="number" id="directional-light-dir-y" step="0.1" value="-1" />
                      <input type="number" id="directional-light-dir-z" step="0.1" value="0" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div id="maze-controls" class="mode-panel hidden">
          <div class="panel collapsible">
            <button class="panel-header" data-panel="maze-settings">
              <span class="panel-chevron">▼</span>
              Maze Settings
            </button>
            <div class="panel-content" id="panel-maze-settings">
              <button id="btn-generate-maze" class="primary">Generate Maze</button>
              <div class="control-row">
                <label for="maze-cols">Columns</label>
                <input type="range" id="maze-cols" min="5" max="30" step="1" value="10" />
                <span id="maze-cols-value">10</span>
              </div>
              <div class="control-row">
                <label for="maze-rows">Rows</label>
                <input type="range" id="maze-rows" min="5" max="30" step="1" value="10" />
                <span id="maze-rows-value">10</span>
              </div>
              <div class="control-row">
                <label for="maze-space">Space between walls</label>
                <input type="range" id="maze-space" min="0.5" max="8" step="0.5" value="2" />
                <span id="maze-space-value">2</span>
              </div>
              <div class="control-row">
                <label for="maze-thickness">Wall thickness</label>
                <input type="range" id="maze-thickness" min="0.05" max="2" step="0.05" value="0.15" />
                <span id="maze-thickness-value">0.15</span>
              </div>
              <div class="control-row">
                <label for="maze-height">Wall height</label>
                <input type="range" id="maze-height" min="0.5" max="12" step="0.5" value="2" />
                <span id="maze-height-value">2</span>
              </div>
              <div class="control-row">
                <label for="maze-exit-width">Exit width (cells)</label>
                <input type="range" id="maze-exit-width" min="1" max="9" step="1" value="1" />
                <span id="maze-exit-width-value">1</span>
              </div>
              <div class="control-row" id="center-room-row">
                <label for="maze-center-size">Center room size</label>
                <input type="range" id="maze-center-size" min="1" max="6" step="1" value="2" />
                <span id="maze-center-size-value">2</span>
              </div>
              <div class="control-row">
                <label>
                  <input type="checkbox" id="maze-start-from-center" checked />
                  Start from center
                </label>
              </div>
            </div>
          </div>
        </div>
        <div id="arena-controls" class="mode-panel hidden">
          <div class="panel collapsible">
            <button class="panel-header" data-panel="arena-settings">
              <span class="panel-chevron">▼</span>
              Arena Settings
            </button>
            <div class="panel-content" id="panel-arena-settings">
              <button id="btn-generate-arena" class="primary">Generate Arena</button>
              <div class="control-row">
                <label for="arena-cols">Columns</label>
                <input type="range" id="arena-cols" min="10" max="50" step="1" value="24" />
                <span id="arena-cols-value">24</span>
              </div>
              <div class="control-row">
                <label for="arena-rows">Rows</label>
                <input type="range" id="arena-rows" min="10" max="50" step="1" value="24" />
                <span id="arena-rows-value">24</span>
              </div>
              <div class="control-row">
                <label for="arena-tile">Tile size</label>
                <input type="range" id="arena-tile" min="0.5" max="6" step="0.5" value="2.5" />
                <span id="arena-tile-value">2.5</span>
              </div>
              <div class="control-row">
                <label for="arena-height">Wall height</label>
                <input type="range" id="arena-height" min="1" max="12" step="0.5" value="3" />
                <span id="arena-height-value">3</span>
              </div>
              <div class="control-row">
                <label for="arena-density">Obstacle density</label>
                <input type="range" id="arena-density" min="0" max="0.6" step="0.05" value="0.28" />
                <span id="arena-density-value">0.28</span>
              </div>
              <div class="control-row">
                <label for="arena-buildings">Building count</label>
                <input type="range" id="arena-buildings" min="0" max="20" step="1" value="8" />
                <span id="arena-buildings-value">8</span>
              </div>
              <div class="control-row">
                <label for="arena-smoothing">Smoothing passes</label>
                <input type="range" id="arena-smoothing" min="0" max="4" step="1" value="2" />
                <span id="arena-smoothing-value">2</span>
              </div>
              <div class="control-row">
                <label for="arena-corridor">Corridor width</label>
                <input type="range" id="arena-corridor" min="1" max="3" step="1" value="1" />
                <span id="arena-corridor-value">1</span>
              </div>
              <div class="control-row">
                <label for="arena-candidates">Candidate maps</label>
                <input type="range" id="arena-candidates" min="1" max="12" step="1" value="8" />
                <span id="arena-candidates-value">8</span>
              </div>
              <div class="control-row credit-row">
                <a
                  class="credit-link"
                  href="https://inria.hal.science/hal-01408516v1/file/978-3-662-45212-7_19_Chapter.pdf"
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  Arena generator inspired by Bhojan &amp; Wong (2014)
                </a>
              </div>
            </div>
          </div>
        </div>
        <div id="skybox-controls" class="mode-panel hidden">
          <div class="panel collapsible">
            <button class="panel-header" data-panel="skybox-settings">
              <span class="panel-chevron">▼</span>
              Sky &amp; Sun
            </button>
            <div class="panel-content" id="panel-skybox-settings">
              <div class="control-row">
                <label for="sky-turbidity">Turbidity</label>
                <input type="range" id="sky-turbidity" min="0" max="20" step="0.1" value="10" />
                <span id="sky-turbidity-value">10</span>
              </div>
              <div class="control-row">
                <label for="sky-rayleigh">Rayleigh</label>
                <input type="range" id="sky-rayleigh" min="0" max="4" step="0.001" value="3" />
                <span id="sky-rayleigh-value">3</span>
              </div>
              <div class="control-row">
                <label for="sky-mie">Mie coefficient</label>
                <input type="range" id="sky-mie" min="0" max="0.1" step="0.001" value="0.005" />
                <span id="sky-mie-value">0.005</span>
              </div>
              <div class="control-row">
                <label for="sky-mie-g">Mie directional G</label>
                <input type="range" id="sky-mie-g" min="0" max="1" step="0.001" value="0.7" />
                <span id="sky-mie-g-value">0.7</span>
              </div>
              <div class="control-row">
                <label for="sky-elevation">Sun elevation (°)</label>
                <input type="range" id="sky-elevation" min="0" max="90" step="0.1" value="2" />
                <span id="sky-elevation-value">2</span>
              </div>
              <div class="control-row">
                <label for="sky-azimuth">Sun azimuth (°)</label>
                <input type="range" id="sky-azimuth" min="-180" max="180" step="0.1" value="180" />
                <span id="sky-azimuth-value">180</span>
              </div>
              <div class="control-row">
                <label for="sky-exposure">Exposure</label>
                <input type="range" id="sky-exposure" min="0" max="1" step="0.0001" value="0.5" />
                <span id="sky-exposure-value">0.5</span>
              </div>
              <div class="tool-divider" role="separator"></div>
              <div class="control-row">
                <label for="sun-intensity">Sun intensity</label>
                <input type="range" id="sun-intensity" min="0" max="3" step="0.05" value="1" />
                <span id="sun-intensity-value">1</span>
              </div>
              <div class="control-row">
                <label for="sun-color">Sun color</label>
                <input type="color" id="sun-color" value="#ffffff" />
              </div>
            </div>
          </div>
        </div>
        <div class="control-footer">
          <a class="credit-link" href="https://kenney.nl/assets" target="_blank" rel="noopener noreferrer">
            Assets courtesy of Kenney
          </a>
        </div>
      </div>
    </div>
    <script type="module" src="./src/main.js"></script>
  </body>
</html>
